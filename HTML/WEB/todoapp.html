<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
</head>
<body>
    <div class="container bg-warning shadow mx-auto mt-5 p-5 w-75">
        <h2>My ToDo App</h2>
        <hr>
        <div class="input-group">
          <input id="item" class="form-control" type="text" placeholder="할일을 입력하세요..">
          <button type="button" class="btn btn-primary" onclick="addItem()">할일 추가</button>
        </div>
        <hr>
        <ul id="todolist" class="list-group"></ul>
    </div>
    <script>
        function addItem() {
            // addItem 을 클릭하면 입력된 값 요소 변수에 저장하기
            // let 을 사용해서 변수 지정하면 변수 재정의 불가능 (불변)
            let todo = document.getElementById('item');
            // console.log(todo)

            // <ul> 요소를 참조할 객체 변수 생성
            let list = document.getElementById('todolist');

            // <li> 태그 요소 생성 
            let listItem = document.createElement('li'); 

            // 삭제 button 요소 참조 변수 생성
            let xbtn = document.createElement('button');

            // <li> 요소에 클래스 추가
            listItem.className = 'd-flex list-group-item list-group-item-action list-group-item-warning';

            // 삭제 버튼에 클래스 추가
            xbtn.className = 'btn-close ms-auto';

            // 삭제 버튼에 이벤트 추가
            xbtn.onclick = function(e) {
                // 이벤트가 발생한 li 요소를 찾아서 삭제
                let pnode = e.target.parentNode;  // 타겟을 위치 값이 자동으로 변수에 들어가도록
                // 해당 li 요소를 ul에서 삭제
                list.removeChild(pnode)
            }

            // <li> 요소에 입력된 값 추가
            listItem.innerText = todo.value; // <li>할일</li>
            listItem.appendChild(xbtn); // <li>할일<button></button></li>

            // <ul> 요소에 위에서 생성한 <li> 요소 추가
            list.appendChild(listItem);

            // 입력창 초기화 및 포커스 이동
            todo = '';
            todo.focus(); 
        }
    </script>
</body>
</html>